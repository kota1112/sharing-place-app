# config/storage.yml

# ---- テスト用（一時ディスク）----
test:
  service: Disk
  root: <%= Rails.root.join("tmp/storage") %>

# ---- 開発用（ローカルディスク）----
local:
  service: Disk
  root: <%= Rails.root.join("storage") %>

# ---- 本番などで使う S3（環境変数ドリブン）----
# 環境変数:
#   AWS_BUCKET            ... 例: your-app-prod
#   AWS_REGION            ... 例: ap-southeast-2
#   AWS_ACCESS_KEY_ID
#   AWS_SECRET_ACCESS_KEY
#
# ※ AWS SDK は環境変数を自動で読みます。明示指定してもOKです。
amazon:
  service: S3
  bucket: <%= ENV.fetch("AWS_BUCKET") %>
  region: <%= ENV.fetch("AWS_REGION", "ap-southeast-2") %>
  # 明示的に渡したい場合のみ以下を有効化（環境変数から自動取得できるため通常は不要）
  access_key_id: <%= ENV["AWS_ACCESS_KEY_ID"] %>
  secret_access_key: <%= ENV["AWS_SECRET_ACCESS_KEY"] %>

# 参考: 他クラウドの例（不要ならこのまま放置でOK）
# google:
#   service: GCS
#   project: your_project
#   credentials: <%= Rails.root.join("path/to/gcs.keyfile") %>
#   bucket: your_own_bucket-<%= Rails.env %>

# microsoft:
#   service: AzureStorage
#   storage_account_name: your_account_name
#   storage_access_key: <%= Rails.application.credentials.dig(:azure_storage, :storage_access_key) %>
#   container: your_container_name-<%= Rails.env %>

# mirror:
#   service: Mirror
#   primary: local
#   mirrors: [ amazon ]
